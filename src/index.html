<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sistema de Comisiones - SERSA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="comisiones.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body class="bg-light">
<div class="container-fluid">
    <div class="row g-3" id="container">
    <aside id="sidebar" class="col-12 col-md-4 col-lg-3">
        <header>
            <h1>Comisiones SERSA</h1>
            <select id="profileSelect" onchange="changeProfile(this.value)">
                <option value="agil_1">√Ågil 1</option>
                <option value="agil_2">√Ågil 2</option>
                <option value="empresarial_1">Empresarial 1</option>
                <option value="empresarial_2">Empresarial 2</option>
            </select>
            <div class="pdf-menu">
                <button type="button" class="header-btn" onclick="togglePDFMenu()" aria-haspopup="true" aria-expanded="false">üìÑ PDF ‚ñº</button>
                <div class="pdf-menu-options" id="pdfMenuOptions" role="menu">
                    <button type="button" role="menuitem" onclick="descargarPDF()">üìÑ PDF Simple</button>
                    <button type="button" role="menuitem" onclick="generateProfessionalPDF()">üìä PDF Profesional</button>
                </div>
            </div>
        </header>
        <form id="datosForm" class="mt-3">
            <div class="mb-3">
                <label for="nivelAnterior" class="form-label">Nivel anterior</label>
                <select id="nivelAnterior" class="form-select">
                    <option value="0">Capilla</option>
                    <option value="1">Junior</option>
                    <option value="2" selected>Senior A</option>
                    <option value="3">Senior B</option>
                    <option value="4">M√°ster</option>
                    <option value="5">Genio</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="montoInterno" class="form-label">Monto Interno*</label>
                <input type="text" id="montoInterno" class="form-control" inputmode="numeric" required aria-label="Monto Interno" aria-describedby="descMontoInterno">
                <small id="descMontoInterno" class="form-text">Monto total de operaciones internas</small>
                <div id="progInterno" class="progress my-2">
                    <div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div>
                </div>
            </div>
            <div class="mb-3">
                <label for="montoExterno" class="form-label">Monto Externo*</label>
                <input type="text" id="montoExterno" class="form-control" inputmode="numeric" required aria-label="Monto Externo" aria-describedby="descMontoExterno">
                <small id="descMontoExterno" class="form-text">Monto total de operaciones externas</small>
                <div id="progExterno" class="progress my-2">
                    <div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div>
                </div>
            </div>
            <div class="mb-3">
                <label for="montoRecuperado" class="form-label">Recuperados*</label>
                <input type="text" id="montoRecuperado" class="form-control" inputmode="numeric" required aria-label="Monto Recuperado" aria-describedby="descRecuperado">
                <small id="descRecuperado" class="form-text">Monto recuperado superior a 3M</small>
                <div id="progRecuperado" class="progress my-2">
                    <div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div>
                </div>
            </div>
            <div class="mb-3">
                <label for="cantidad" class="form-label">Cantidad*</label>
                <input type="number" id="cantidad" class="form-control" required aria-label="Cantidad de desembolsos" aria-describedby="descCantidad">
                <small id="descCantidad" class="form-text">N√∫mero total de desembolsos</small>
                <div id="progCantidad" class="progress my-2">
                    <div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div><div class="progress-bar progress-segment"></div>
                </div>
            </div>
            <div class="mb-3">
                <label for="menorSemana" class="form-label">Menor Semana*</label>
                <input type="number" id="menorSemana" class="form-control" min="0" max="4" required aria-label="Menor semana" aria-describedby="descSemana">
                <small id="descSemana" class="form-text">Semanas con al menos un desembolso</small>
            </div>
            <div class="mb-3">
                <label for="nivelEquipo" class="form-label">Menor nivel del equipo</label>
                <select id="nivelEquipo" class="form-select">
                    <option value="0">Capilla</option>
                    <option value="1">Junior</option>
                    <option value="2">Senior A</option>
                    <option value="3">Senior B</option>
                    <option value="4">M√°ster</option>
                    <option value="5">Genio</option>
                </select>
            </div>
            <fieldset class="mb-3">
                <legend>Multiplicadores (%)</legend>
                <div class="row g-2">
                    <div class="col-6">
                        <label for="conv" class="form-label">Conversi√≥n</label>
                        <input type="number" id="conv" class="form-control" required aria-label="Porcentaje de conversi√≥n" aria-describedby="descConv">
                        <small id="descConv" class="form-text">Resultado de conversi√≥n (%)</small>
                    </div>
                    <div class="col-6">
                        <label for="emp" class="form-label">Empat√≠a</label>
                        <input type="number" id="emp" class="form-control" required aria-label="Porcentaje de empat√≠a" aria-describedby="descEmp">
                        <small id="descEmp" class="form-text">Puntuaci√≥n de empat√≠a</small>
                    </div>
                    <div class="col-6">
                        <label for="proc" class="form-label">Proceso</label>
                        <input type="number" id="proc" class="form-control" required aria-label="Porcentaje de proceso" aria-describedby="descProc">
                        <small id="descProc" class="form-text">Calidad de proceso CRM</small>
                    </div>
                    <div class="col-6">
                        <label for="mora" class="form-label">Mora</label>
                        <input type="number" id="mora" class="form-control" required aria-label="Porcentaje de mora" aria-describedby="descMora">
                        <small id="descMora" class="form-text">Porcentaje de mora</small>
                    </div>
                </div>
            </fieldset>
        </form>
    </aside>
    <main id="result">
        <section>
            <h2>Comisi√≥n Final</h2>
            <div id="comisionTotal">0</div>
        </section>
        <section id="detalle"></section>
    </main>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="app.js"></script>
</body>
</html>
